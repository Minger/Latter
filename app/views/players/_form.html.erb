<fieldset>
  <legend><%= form.object.new_record? ? I18n.t('player.new.heading') : I18n.t('player.edit.heading') %></legend>

  <%= render :partial => 'shared/form_errors', :locals => {:form => form} %>

  <div class="control-group">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div class="control-group">
    <%= form.label :email %>
    <%= form.email_field :email %>
  </div>

  <% unless form.object.new_record? %>
    <div class="control-group">
      <%= form.label :wants_challenge_completed_notifications, :class => 'checkbox' do %>
        <%= form.check_box :wants_challenge_completed_notifications %>
        <%= I18n.t('player.attributes.wants_challenge_completed_notifications') %>
      <% end %>
      <span class="help-block">
        <%= I18n.t('player.attributes.wants_challenge_completed_notifications_help') %>
      </span>
    </div>

    <div class="control-group">
      <%= form.label :wants_javascript_notifications, :class => 'checkbox' do %>
        <%= form.check_box :wants_javascript_notifications %>
        <%= I18n.t('player.attributes.wants_javascript_notifications') %>
      <% end %>

      <p class="help-block">
        <%= I18n.t('player.attributes.wants_javascript_notifications_help') %>
      </p>

      <fieldset id="javascript_notification_config">
        <legend><%= I18n.t('player.javascript_notifications.form.heading') %></legend>

        <button id="notifications_permissions" type="button" class="btn btn-primary btn-large">
          <%= I18n.t('player.javascript_notifications.form.permissions_button') %>
        </button>

        <button id="notifications_test" type="button" class="btn btn-large">
          <%= I18n.t('player.javascript_notifications.form.test_button') %>
        </button>

        <hr />
      </fieldset>
    </div>

    <div class="control-group">
      <%= form.label :password, I18n.t('player.attributes.new_password') %>
      <%= form.password_field :password, :autocomplete => 'off' %>
      <span class="help-block"><%= I18n.t('player.attributes.password_help') %></span>
    </div>

    <div class="control-group">
      <%= form.label :password_confirmation, I18n.t('player.attributes.confirm_new_password') %>
      <%= form.password_field :password_confirmation %>
    </div>

    <div class="control-group success">
      <%= form.label :current_password, I18n.t('player.attributes.current_password') %>
      <%= form.password_field :current_password %>
      <span class="help-block"><%= I18n.t('player.attributes.current_password_help') %></span>
    </div>
  <% end %>

  <div class="form-actions">
    <%= form.submit I18n.t('player.form.save'), :class => 'btn btn-primary' %>
    <%= link_to I18n.t('player.form.cancel'), root_path, :class => 'btn' %>
  </div>
</fieldset>
